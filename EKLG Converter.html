<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gujarati Unicode to EKLG Converter</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-xl p-8 max-w-4xl w-full">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">ગુજરાતી યુનિકોડ થી EKLG કન્વર્ટર</h1>
        <p class="text-gray-600 mb-8 text-center">
            તમારા ગુજરાતી યુનિકોડ ટેક્સ્ટને EKLG ફોર્મેટમાં રૂપાંતરિત કરો.
            <br>
            <span class="text-sm text-red-500">
                નોંધ: આ રૂપાંતરણ મેપિંગ પ્રદાન કરેલા Python કોડ પર આધારિત છે.
                જો તમને ચોક્કસ EKLG આઉટપુટ જોઈતું હોય, તો તમારે `conversion_map` ને યોગ્ય રીતે ભરવાની જરૂર પડશે.
            </span>
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <label for="unicodeInput" class="block text-lg font-medium text-gray-700 mb-2">યુનિકોડ ગુજરાતી ઇનપુટ</label>
                <textarea
                    id="unicodeInput"
                    class="w-full p-4 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-base resize-y min-h-[150px]"
                    rows="10"
                    placeholder="અહીં તમારો યુનિકોડ ગુજરાતી ટેક્સ્ટ દાખલ કરો..."
                ></textarea>
            </div>
            <div>
                <label for="eklgOutput" class="block text-lg font-medium text-gray-700 mb-2">EKLG આઉટપુટ</label>
                <textarea
                    id="eklgOutput"
                    class="w-full p-4 border border-gray-300 rounded-lg bg-gray-50 text-base resize-y min-h-[150px]"
                    rows="10"
                    readonly
                    placeholder="રૂપાંતરિત EKLG ટેક્સ્ટ અહીં દેખાશે..."
                ></textarea>
            </div>
        </div>

        <div class="mt-8 flex justify-center space-x-4">
            <button
                id="convertButton"
                class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"
            >
                કન્વર્ટ કરો
            </button>
            <button
                id="copyButton"
                class="px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"
            >
                કોપી કરો
            </button>
        </div>
        <div id="messageBox" class="mt-4 text-center text-sm font-medium hidden"></div>
    </div>

    <script>
        // JavaScript conversion logic
        document.addEventListener('DOMContentLoaded', () => {
            const unicodeInput = document.getElementById('unicodeInput');
            const eklgOutput = document.getElementById('eklgOutput');
            const convertButton = document.getElementById('convertButton');
            const copyButton = document.getElementById('copyButton');
            const messageBox = document.getElementById('messageBox');

            // The core mapping from Gujarati Unicode to EKLG.
            // This is directly translated from your provided Python map.
            // IMPORTANT: If you want accurate EKLG, you must ensure these mappings are correct.
            const conversion_map = {
                'અ': 'y',
                'આ': 'yt',
                'ઇ': 'E',
                'ઈ': 'E', // You had E twice, keeping it as is
                'ઉ': 'W',
                'ઊ': 'Q',
                'એ': 'yu',
                'ઐ': 'yi',
                'ઓ': 'ytu',
                'ઔ': 'yti',
                'ક': 'f',
                'ખ': 'Ft',
                'ગ': 'dt',
                'ઘ': 'Dt',
                'ચ': 'at',
                'છ': 'A',
                'જ': 's',
                'ઝ': 'L',
                'જા': 'S',
                'ટ': 'x',
                'ઠ': 'X',
                'ડ': 'z',
                'ઢ': 'Z',
                'ણ': 'Kt',
                'ત': ';t',
                'થ': ':t',
                'દ': "'", // This was an empty string in your map, note this.
                'ધ': '"t',
                'ન': 'lt',
                'પ': 'vt',
                'ફ': 'V',
                'બ': 'ct',
                'ભ': 'Ct',
                'મ': 'bt',
                'ય': 'gt',
                'ર': 'h',
                'લ': 'jt',
                'ળ': 'G',
                'વ': 'Jt',
                'શ': 'Nt',
                'ષ': 'Mt',
                'સ': 'mt',
                'હ': 'n',
                'રૂ': '~',
                'જી': 'B',
                'રૂ': '~',

                // Gujarati Vowel Signs (Matras)
                'ા': 't',
                'િ': 'r',
                'ી': 'e',
                'ુ': 'w',
                'ૂ': 'q',
                'ૃ': ']',
                'ે': 'u',
                'ૈ': 'Oi',
                'ો': 'tu',
                'ૌ': 'ti',
                '્': 'k', // Halant (virama)
                'ં': '^', // Anusvara
                'ઃ': '&', // Visarga

                // Gujarati Digits
                '૦': '0',
                '૧': '1',
                '૨': '2',
                '૩': '3',
                '૪': '4',
                '૫': '5',
                '૬': '6',
                '૭': '7',
                '૮': '8',
                '૯': '9',

                // Other common characters
                ' ': ' ', // Space
                '.': '.', // Period
                ',': ',', // Comma
                // Add more as needed for conjuncts or specific combinations
                // For example, if 'ક્ર' maps to 'f%', you might add:
                // 'ક્ર': 'f%',
                // 'જ્ઞ': 's%', // Just an example, verify with actual EKLG

                '¦': 'Alt+0166',
                '§': 'Alt+0167',
                '¨': 'Alt+0168',
                '©': 'Alt+0169',
                '«': 'Alt+0171',
                '¬': 'Alt+0172',
                '¯': 'Alt+0175',
                '°': 'Alt+0176',
                '±': 'Alt+0177',
                '²': 'Alt+0178',
                '³': 'Alt+0179',
                '´': 'Alt+0180',
                'µ': 'Alt+0181',
                '¶': 'Alt+0182',
                '·': 'Alt+0183',
                '¸': 'Alt+0184',
                '¹': 'Alt+0185',
                'º': 'Alt+0186',
                '»': 'Alt+0187',
                '¼': 'Alt+0188',
                '½': 'Alt+0189',
                '¾': 'Alt+0190',
                '¿': 'Alt+0191',

                'ઋ': 'Alt+0210',
                'ગ્': 'd',
                'ખ્': 'F',
                'ઘ્': 'D',
                'ચ્': 'a',
                'ણ્': 'K',
                'ત્': ';',
                'થ્': ':',
                'ધ્': '"',
                'ન્': 'l',
                'પ્': 'v',
                'બ્': 'c',
                'ભ્': 'C',
                'મ્': 'b',
                'ય્': 'g',
                'લ્': 'j',
                'વ્': 'J',
                'શ્': 'N',
                'ષ્': '>',
                'સ્': '/',
                'ક્ષ્': 'H',
                'ટ્ર': 'x{',
                'ુ': 'w',
                'ૂ': 'q',
                'ે': 'u',
                'ૈ': 'i',
                'ો': 'tu',
                'ૌ': 'ti',
                '્': 'T',
                'ં': 'k',
                'ઃ': '&',
                'ઁ': 'pk',
                'ૐ': 'Alt+0211',
            };

            /**
             * Converts Gujarati Unicode text to its EKLG equivalent.
             * @param {string} gujarati_text - The input text in Gujarati Unicode.
             * @returns {string} The converted text in the hypothetical EKLG representation.
             */
            function convertGujaratiToEklg(gujarati_text) {
                let converted_text_parts = [];
                let i = 0;
                while (i < gujarati_text.length) {
                    let char = gujarati_text[i];
                    let matched = false;

                    // Prioritize longer matches for potential conjuncts or specific sequences
                    // Iterate from longest possible match down to single character
                    for (let len = 3; len >= 1; len--) { // Max length of a map key we expect (e.g., 'ytu' for 'ઓ')
                        if (i + len <= gujarati_text.length) {
                            let sub_string = gujarati_text.substring(i, i + len);
                            if (conversion_map[sub_string] !== undefined) {
                                converted_text_parts.push(conversion_map[sub_string]);
                                i += len;
                                matched = true;
                                break;
                            }
                        }
                    }

                    if (!matched) {
                        // If no specific mapping for a substring, try single character
                        if (conversion_map[char] !== undefined) {
                            converted_text_parts.push(conversion_map[char]);
                        } else {
                            // If a character is not in the map, keep it as is.
                            converted_text_parts.push(char);
                        }
                        i++;
                    }
                }
                return converted_text_parts.join("");
            }

            // Event listener for the Convert button
            convertButton.addEventListener('click', () => {
                const input = unicodeInput.value;
                const output = convertGujaratiToEklg(input);
                eklgOutput.value = output;
                showMessage("રૂપાંતરણ સફળ!", "text-green-600");
            });

            // Event listener for the Copy button
            copyButton.addEventListener('click', () => {
                if (eklgOutput.value) {
                    // Use document.execCommand('copy') for better iframe compatibility
                    eklgOutput.select();
                    document.execCommand('copy');
                    showMessage("ટેક્સ્ટ કોપી થઈ ગયું!", "text-green-600");
                } else {
                    showMessage("કૉપી કરવા માટે કોઈ ટેક્સ્ટ નથી.", "text-red-600");
                }
            });

            // Function to show messages
            function showMessage(message, className) {
                messageBox.textContent = message;
                messageBox.className = `mt-4 text-center text-sm font-medium ${className} block`;
                setTimeout(() => {
                    messageBox.classList.add('hidden');
                }, 3000); // Hide after 3 seconds
            }
        });
    </script>
</body>
</html>
